<div class="app-wrapper">
  <div class="app-header">
    <app-header></app-header>
  </div>
  <div class="app-body">
    <div class="dashboard">
      <div class="row">
        <div class="col" routerLink="/project">
          <div class="tile twv tile-blue">
            <div class="icon">
              <mat-icon>real_estate_agent</mat-icon>
            </div>
            <div class="tile-body">
              <div class="title">Total Projects</div>
              <div class="count">{{projectCount}}</div>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="tile twv tile-yellow">
            <div class="icon">
              <mat-icon>account_balance</mat-icon>
            </div>
            <div class="tile-body">
              <div class="title">Total Project Value</div>
              <div class="count">{{totalWorkValue | currency:'AED '}}</div>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="tile twv tile-green">
            <div class="icon">
              <mat-icon>savings</mat-icon>
            </div>
            <div class="tile-body">
              <div class="title">Total Billed</div>
              <div class="count">{{totalBilled | currency:'AED '}}</div>
            </div>
          </div>
        </div>

        <div class="col">
          <div class="tile twv tile-red">
            <div class="icon">
              <mat-icon>balance</mat-icon>
            </div>
            <div class="tile-body">
              <div class="title">Balance Project Value</div>
              <div class="count">{{balanceWorkValue | currency:'AED '}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="graph-wrapper">
        <div class="unit-container">
          <div class="unit escalator">
            <div class="unit-icon">
              <mat-icon>escalator</mat-icon>
            </div>
            <div class="unit-body">
              <div class="unit-header">Escalator</div>
              <div class="unit-count">{{projectUnitCount?.escalator}}</div>
            </div>
          </div>
          <div class="unit elevator">
            <div class="unit-icon">
              <mat-icon>elevator</mat-icon>
            </div>
            <div class="unit-body">
              <div class="unit-header">Elevator</div>
              <div class="unit-count">{{projectUnitCount?.elevator}}</div>
            </div>
          </div>
          <div class="unit travelator">
            <div class="unit-icon">
              <img width="50px" src="assets/images/travelator.png" alt="T">
            </div>
            <div class="unit-body">
              <div class="unit-header">Travelator</div>
              <div class="unit-count">{{projectUnitCount?.travelator}}</div>
            </div>
          </div>
        </div>
        <div class="line-graph">
          <div class="title">Installation Progress</div>
          <div class="" *ngIf="lineChartData">
            <canvas baseChart type="line" [data]="lineChartData" [options]="lineChartOptions">
            </canvas>
          </div>
        </div>
        <div class="pie-graph">
          <div class="title">Project Status</div>
          <div class="graph">
            <canvas baseChart type="pie" [data]="pieChartData">
            </canvas>
          </div>
        </div>
      </div>

      <div class="dashboard-container-3">
        <div class="pinned-projects">
          <div class="title">Pinned Projects</div>
          <div class="pinned-project">
            <table mat-table [dataSource]="pinnedProjects">

              <ng-container matColumnDef="slNo">
                <th mat-header-cell *matHeaderCellDef> Sl.No. </th>
                <td mat-cell *matCellDef="let i=index"> {{i+1}} </td>
              </ng-container>

              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef="let element"> {{element.name}} </td>
              </ng-container>

              <ng-container matColumnDef="contractor">
                <th mat-header-cell *matHeaderCellDef> Contractor </th>
                <td mat-cell *matCellDef="let element"> {{element.contractor}} </td>
              </ng-container>

              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let element"> {{setStatus(element.status)}} </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="goToProject(row.id)"></tr>
              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="12">There is no project pinned yet.</td>
              </tr>
            </table>
          </div>
        </div>

        <div class="man-hour-wrapper">
          <div class="title">Resource Utilization</div>
          <div class="man-hour-wrapper-container">
            <div class="budget-mh">
              <div class="title">Budgeted</div>
              <div class="man-hour-container">
                <div class="man-hour btmh">
                  <div class="man-hour-icon">
                    <mat-icon>settings_accessibility</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Technician</div>
                    <div class="man-hour-count">{{(manHour?.estimatedTechnician * technicianSalary) | currency:'AED '}}
                    </div>
                    <div class="man-hour-salary">{{manHour?.estimatedTechnician}} Hours</div>
                  </div>
                </div>
                <div class="man-hour btmh">
                  <div class="man-hour-icon">
                    <mat-icon>wheelchair_pickup</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Helper</div>
                    <div class="man-hour-count">{{(manHour?.estimatedHelper * helperSalary) | currency:'AED '}}</div>
                    <div class="man-hour-salary">{{manHour?.estimatedHelper}} Hours</div>
                  </div>
                </div>
                <div class="man-hour btmh">
                  <div class="man-hour-icon">
                    <mat-icon>functions</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Total</div>
                    <div class="man-hour-count">
                      {{ (manHour?.estimatedTechnician * technicianSalary) + (manHour?.estimatedHelper * helperSalary) | currency:'AED '}}
                    </div>
                    <div class="man-hour-salary">
                      {{manHour?.estimatedTechnician + manHour?.estimatedHelper}} Hours
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="actual-mh">

              <div class="title">Actual</div>
              <div class="man-hour-container">
                <div class="man-hour atmh">
                  <div class="man-hour-icon">
                    <mat-icon>settings_accessibility</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Technician</div>
                    <div class="man-hour-count">{{(manHour?.actualTechnician * technicianSalary) | currency:'AED '}}
                    </div>
                    <div class="man-hour-salary">{{manHour?.actualTechnician}} Hours</div>
                  </div>
                </div>
                <div class="man-hour atmh">
                  <div class="man-hour-icon">
                    <mat-icon>wheelchair_pickup</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Helper</div>
                    <div class="man-hour-count">{{(manHour?.actualHelper * helperSalary) | currency:'AED '}}</div>
                    <div class="man-hour-salary">{{manHour?.actualHelper}} Hours</div>
                  </div>
                </div>
                <div class="man-hour atmh">
                  <div class="man-hour-icon">
                    <mat-icon>functions</mat-icon>
                  </div>
                  <div class="man-hour-body">
                    <div class="man-hour-header">Total</div>
                    <div class="man-hour-count">
                      {{(manHour?.actualTechnician * technicianSalary) + (manHour?.actualHelper * helperSalary) | currency:'AED '}}
                    </div>
                    <div class="man-hour-salary">
                      {{manHour?.actualTechnician + manHour?.actualHelper}} Hours
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
